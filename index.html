<script>
  function normalize(text) {
    return text.trim().toLowerCase().replace(/\s+/g, '');
  }

  function checkAnswer(step, correctAnswer) {
    const input = document.getElementById('answer' + step).value;
    if (normalize(input) === normalize(correctAnswer)) {
      // Reveal random digit
      const digit = Math.floor(Math.random() * 10);
      const digitDisplay = document.getElementById('digit' + step);
      digitDisplay.textContent = "Code digit: " + digit;

      // Pause briefly before showing the next clue
      setTimeout(() => {
        // Hide current clue
        const currentClue = document.getElementById('clue' + step);
        currentClue.classList.remove('active');

        // Show next clue or final message
        const nextClue = document.getElementById('clue' + (step + 1));
        if (nextClue) {
          nextClue.classList.add('active');
        } else {
          document.getElementById('complete').classList.add('active');
        }
      }, 1500);
    } else {
      alert("Try again!");
    }
  }
</script>
